<html><head/><body>


    
        <title>Regression Using Core ML in iOS</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">在iOS中使用核心ML进行回归</h1>
                
            
            
                
<p>本章将为您提供回归算法的概述和对Core ML基础知识的深入了解，并将向您介绍如何创建一个利用回归算法的机器学习程序，以及如何使用iOS中的Core ML来预测给定的一组住房相关数据的房价。</p>
<p>正如我们在<a href="51fcaf51-eb68-4493-afc2-0b02f1c1d50e.xhtml" target="_blank">第一章</a>、<em>移动机器学习简介</em>中已经看到的，任何机器学习程序都有四个阶段。我们将看到我们将在四个阶段中涵盖什么，以及我们将使用什么工具来解决底层的机器学习问题。</p>
<p><strong>问题定义</strong>:提供了某个区域的房屋信息，我们想预测该区域一套房屋的中值。</p>
<p>我们将在本章中讨论以下主题:</p>
<ul>
<li>理解什么是回归以及如何应用它来解决一个ML问题</li>
<li>使用示例数据集和Excel了解回归</li>
<li>了解核心ML的基础知识</li>
<li>在核心ML中使用回归解决问题:<ul>
<li>技术要求</li>
<li>如何使用scikit-learn创建模型文件</li>
<li>测试模型</li>
<li>了解如何将scikit-learn模型导入到核心ML项目中</li>
<li>编写一个iOS移动应用程序，在其中使用scikit-learn模型，并进行房价预测</li>
</ul>
</li>
</ul>


            

            
        
    






    
        <title>Introduction to regression</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">回归导论</h1>
                
            
            
                
<p>回归分析是数据统计分析中的一种基本方法。这是一种统计方法，有助于发现变量之间的关系。它主要用于理解输入和输出数值变量之间的关系。我们应该首先确定因变量，它会根据自变量的值而变化。例如，房子的价值(因变量)根据房子的平方英尺(自变量)而变化。回归分析对预测非常有用。</p>
<p>在一个简单的回归问题中(单个<em> x </em>和单个<em> y </em>，模型的形式如下:</p>
<div><em>y = A + B*x</em></div>
<p>在更高的维度中，当我们有多个输入(<em> x </em>)时，这条线被称为<strong>平面</strong>或<strong>超平面</strong>。</p>
<p>在我们的示例中，我们根据可能影响特定区域数据价格的各种参数来预测房屋价格。</p>
<p>以下是解决回归问题时要考虑的一些要点:</p>
<ul>
<li>预测是一个数字量。</li>
<li>输入变量可以是实值或离散变量。</li>
<li>如果有多个输入变量，则称之为<strong>多元回归问题</strong>。</li>
<li>当输入变量按时间排序时，回归问题称为<strong>时间序列预测问题</strong>。</li>
<li>回归不应与分类混淆。分类是预测离散类别标签的任务，而回归是预测连续数量的任务。</li>
</ul>
<p>能够学习回归预测模型的算法被称为<strong>回归算法</strong>。</p>


            

            
        
    






    
        <title>Linear regression</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">线性回归</h1>
                
            
            
                
<p>在本节中，我们将通过一个具体数据集的详细示例来理解线性回归。我们也将使用相同的数据集来解决iOS Core ML示例。</p>


            

            
        
    






    
        <title>Dataset</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">资料组</h1>
                
            
            
                
<p>我们将使用波士顿数据集来解决回归问题。该数据集包含由美国人口普查局收集的关于马萨诸塞州波士顿地区住房的信息。它是从StatLib档案(【http://lib.stat.cmu.edu/datasets/boston】T4)中获得的，并在整个文献中被广泛用于基准算法。数据集很小，只有506个案例。</p>


            

            
        
    






    
        <title>Dataset naming</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">数据集命名</h1>
                
            
            
                
<p>这个数据集的名字就叫做<strong>波士顿</strong>。它有两个拍照任务:现在，其中一氧化氮水平将被预测；和价格，其中房屋的中值被预测。</p>
<p>关于数据集的其他详细信息如下:</p>
<ul>
<li><strong>由来</strong>:波士顿住房数据的由来是自然的。</li>
<li><strong>用途</strong>:该数据集可用于评估。</li>
<li><strong>病例数</strong>:数据集共包含506个病例。</li>
<li><strong>顺序</strong>:案件的顺序很神秘。</li>
<li><strong>变量</strong>:数据集的每个案例有14个属性。它们是:<ul>
<li><strong> CRIM </strong>:城镇人均犯罪率</li>
<li>ZN :面积超过25，000平方英尺的住宅用地比例</li>
<li>印度河流域:每个城镇非零售商业用地的比例</li>
<li><strong> CHAS </strong>:查尔斯河虚拟变量(1如果区域边界为河流；否则为0)</li>
<li><strong> NOX </strong>:氮氧化物浓度(百万分之一)</li>
<li>RM :每套住宅的平均房间数</li>
<li><strong>楼龄</strong>:1940年以前建造的自住单元的比例</li>
<li><strong> DIS </strong>:到五个波士顿就业中心的加权距离</li>
<li><strong> RAD </strong>:放射状公路可达性指标</li>
<li><strong>税</strong>:每万美元的全价值财产税税率</li>
<li><strong> PTRATIO </strong>:一个镇的学生教师比</li>
<li><strong> B </strong> : <kbd>1000(Bk - 0.63)^2</kbd>其中<kbd>Bk</kbd>是一个城镇的黑人比例</li>
<li><strong> LSTAT </strong>:人口中地位较低的百分比</li>
<li>MEDV:以1000美元计算的自有住房的中值</li>
</ul>
</li>
</ul>
<p>我们将尝试使用Excel对数据集进行简单的线性回归和多元回归，并了解细节。出于分析目的，我们将仅考虑来自波士顿数据集的506样本数据空间中的以下20个数据元素:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-916 image-border" src="img/30b33a7e-b904-46bb-9b2b-7e0e6891cc6d.png" style="width:75.08em;height:32.42em;"/></p>
<p>现在，我们可以使用Excel中给出的数据分析选项，尝试仅考虑因变量<kbd>DIS</kbd>来预测<kbd>MV</kbd>。在数据分析中，选择<kbd>Regression</kbd>，选择<kbd>MV</kbd>作为<kbd>Y</kbd>值，选择<kbd>DIS</kbd>作为<kbd>X</kbd>值。这是一个简单的回归，用一个因变量来预测产量。以下是Excel生成的输出:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-917 image-border" src="img/bdd8cb77-8ee6-4ba9-b811-b7583870d694.png" style="width:44.42em;height:18.50em;"/></p>
<p>以<kbd>DIS</kbd>为因变量预测<kbd>MV</kbd>的线性回归方程为<em>Y = 1.11 x+17.17</em>(<kbd>DIS</kbd>的<kbd>DIS</kbd>系数+截距值):</p>
<p class="CDPAlignCenter CDPAlign"><em> R2 =0.0250 </em></p>
<p>现在，我们可以看到<kbd>MV</kbd>对考虑用于分析的20个数据样本的预测输出:</p>
<div><img class="aligncenter size-full wp-image-706 image-border" src="img/91d8140e-e041-4d7e-8a2c-4f632a6714d9.png" style="width:33.17em;height:25.75em;"/></div>
<p>因变量<kbd>DIS</kbd>预测的<kbd>MV</kbd>输出图如下:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-705 image-border" src="img/95f4d6ac-183c-40b7-83ac-4e5d78c256f4.png" style="width:24.17em;height:12.58em;"/></p>
<p>现在，我们了解了线性回归对单个因变量的作用。同样，我们可以有任意数量的因变量，通过将它们包括为<em> X1 </em>、<em> X2 </em>、<em> X3 </em>、...<em> XN </em></p>
<p>在我们的数据集中，我们总共有14个变量，我们可以让<kbd>MV</kbd>依赖于所有剩余的13个变量，并以与之前为单个变量指定的相同方式创建回归方程。</p>
<p>现在我们已经了解了如何使用Excel对波士顿数据集执行回归，我们将使用Core ML执行同样的操作。在继续进行并在Core ML中实现之前，我们必须了解什么是Core ML，并研究Core ML的基础知识。</p>


            

            
        
    






    
        <title>Understanding the basics of Core ML</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">了解核心ML的基础知识</h1>
                
            
            
                
<p>Core ML支持iOS移动应用在移动设备上本地运行机器学习模型。它使开发人员能够将各种各样的机器学习模型集成到移动应用程序中。开发人员使用Core ML编写机器学习移动应用程序不需要广泛的机器学习或深度学习知识。他们只需要知道如何像其他资源一样将ML模型包含到移动应用程序中，并在移动应用程序中调用它。数据科学家或机器学习专家可以用他们熟悉的任何技术创建ML模型，比如Keras、scikit-learn等等。Core ML提供了一些工具，可以将使用其他工具(tensor、scikit-learn等)创建的ML数据模型转换成Core ML规定的格式。</p>
<p>这种向核心ML模型的转换发生在应用程序开发阶段。当应用程序正在使用时，它不会实时发生。转换是通过使用<kbd>coremltools</kbd> Python库完成的。当应用程序反序列化一个核心ML模型时，它就变成了一个具有<kbd>prediction</kbd>方法的对象。核心ML并不是真的用于训练，只是用于运行预训练的模型。</p>
<p>Core ML支持广泛的深度学习能力，支持超过30层。深度学习中的层实际上暗示了数据转换的层数。它还支持标准模型:树集成、支持向量机和线性模型。它建立在金属等底层技术之上。Core ML无缝地利用CPU和GPU来提供最大的性能和效率。它能够根据手头任务的强度在CPU和GPU之间切换。由于Core ML允许机器学习在设备上本地运行，数据不需要离开设备进行分析。</p>
<p>借助Core ML，我们可以将经过训练的机器学习模型集成到我们的应用中:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-704 image-border" src="img/a084aaaf-f488-4a3e-b4db-b45bab1c0df3.png" style="width:16.58em;height:17.25em;"/></p>
<p>经过训练的模型是将机器学习算法应用于一组训练数据的结果。该模型根据新的输入数据进行预测。例如，在给定卧室和浴室数量的情况下，在一个地区的历史房价中训练的模型可能能够预测房子的价格。</p>
<p>Core ML针对片上性能进行了优化，最大限度地减少了内存占用和功耗。严格在设备上运行可确保用户数据的隐私，并保证我们的应用程序在网络连接不可用时仍能正常工作和响应。</p>
<p>核心ML是特定领域框架和功能的基础。Core ML支持<strong>视觉</strong>进行图像分析，<strong>自然语言处理</strong>的基础，以及<strong> G </strong> <strong> ameplaykit </strong>评估学习过的决策树。<strong> Core ML </strong>本身构建于底层原语之上，如<strong> Accelerate </strong>和<strong> BNNS </strong>，以及<strong>金属性能着色器</strong>:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-698 image-border" src="img/04f6501e-e6bf-4614-9a2c-e887484d1c7d.png" style="width:32.33em;height:13.25em;"/></p>
<p>打算使用Core ML编写ML程序的iOS开发人员需要了解以下基本步骤:</p>
<ol>
<li>在iOS之外创建模型。这可以使用scikit-learn、TensorFlow或开发人员认为合适的任何其他方式来完成。创建机器学习模型文件。为了创建机器学习模型文件，他们需要知道已经讨论过的机器学习的四个关键阶段。</li>
<li>一旦模型被构建、测试并准备好使用，这个模型需要被转换成与Core ML兼容的格式。Core ML工具实际上有助于将使用任何工具创建的模型文件转换成Core ML规定格式的模型文件(<kbd>.mlmodel</kbd>文件格式)。</li>
<li>一旦创建了核心ML特定的模型文件，就可以将其导入到iOS程序中，并且核心ML提供的API可以用于与模型文件进行交互，以提取iOS应用程序可能需要的所需信息，基本上是将<kbd>.mlmodel</kbd>文件导入到Xcode项目的<kbd>resources</kbd>文件夹中。</li>
</ol>
<p>Core ML最大的优势就是使用起来极其简单。仅仅几行代码就可以帮助集成一个完整的ML模型。Core ML只能帮助将预训练的<strong> </strong> ML模型集成到应用中。没有模特培训是不可能的。</p>


            

            
        
    






    
        <title>Solving the problem using regression in Core ML</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">在核心ML中使用回归解决问题</h1>
                
            
            
                
<p>本节将详细介绍如何创建回归模型，然后在iOS移动应用程序中使用回归模型。它将详细介绍创建iOS回归ML应用程序以解决所定义问题的各个步骤。</p>


            

            
        
    






    
        <title>Technical requirements</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">技术要求</h1>
                
            
            
                
<p>开发人员计算机上需要安装以下软件:</p>
<ul>
<li>计算机编程语言</li>
<li>Mac环境中的Xcode</li>
</ul>
<p>本章的练习程序可以从我们的GitHub资源库下载，网址是<a href="https://github.com/PacktPublishing/Machine-Learning-for-Mobile/tree/master/housing%20price%20prediction">https://GitHub . com/packt publishing/Machine-Learning-for-Mobile/tree/master/housing % 20 price % 20 prediction</a>。</p>
<p class="mce-root">在下面的程序中，我们将使用<kbd>pandas</kbd>、<kbd>numpy</kbd>和<kbd>scikit-learn</kbd>来创建模型。因此，从命令提示符/终端使用以下命令从<kbd>pip</kbd>包管理器安装这些包:</p>
<pre>pip install scikit-learn<br/>pip install numpy<br/>pip install pandas</pre>
<p>为了将创建的模型转换成Core ML格式，我们需要使用Apple提供的Core ML <kbd>scikit-learn</kbd> Python转换器:</p>
<pre><strong>pip install -U coremltools</strong></pre>


            

            
        
    






    
        <title>How to create the model file using scikit-learn</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">如何使用scikit-learn创建模型文件</h1>
                
            
            
                
<p>本节将解释我们如何使用<kbd>scikit-learn</kbd>创建线性回归模型文件，并将其转换成与Core ML兼容的<kbd>.mlmodel</kbd>文件。我们将使用波士顿数据集来创建模型。下面是一个简单的Python程序，它使用波士顿数据集使用<kbd>scikit-learn</kbd>创建了一个简单的线性回归模型。然后核心ML工具将它转换成与核心ML兼容的模型文件。让我们详细地看一下这个程序。</p>
<p>首先，我们需要导入程序所需的包:</p>
<pre># importing required packages<br/> import numpy as np</pre>
<p>前面几行导入NumPy包。NumPy是使用Python进行科学计算的基础包。它包含了一个强大的N维数组对象。这个<kbd>numpy</kbd>数组将在这个程序中用于存储数据集，它有14个维度:</p>
<pre>import pandas as pd<br/> from pandas.core import series</pre>
<p>前面的代码行导入了<kbd>pandas</kbd>包，这是一个开源的、BSD许可的库，为Python编程语言提供了高性能、易于使用的数据结构和数据分析工具。使用熊猫，我们可以创建一个数据框。您可以假设一个<kbd>pandas</kbd>数据框是一个Excel电子表格，其中每个工作表都有标题和数据:</p>
<pre>import coremltools<br/> from coremltools.converters.sklearn import _linear_regression</pre>
<p>前面几行导入了我们在这个程序中使用的线性回归模型的核心ML Tools转换包。Core ML Tools是一个Python包，用于创建、检查和测试<kbd>.mlmodel</kbd>格式的模型。特别是，它可用于执行以下操作:</p>
<ul>
<li>将现有模型从流行的机器学习工具转换成<kbd>.mlmodel</kbd>格式，包括<kbd>Keras</kbd>、<kbd>Caffe</kbd>、<kbd>scikit-learn</kbd>、<kbd>libsvm</kbd>和<kbd>XGBoost</kbd></li>
<li>通过简单的API以<kbd>.mlmodel</kbd>格式表达模型</li>
<li>使用<kbd>.mlmodel</kbd>进行预测(在用于测试目的的选定平台上):</li>
</ul>
<pre>from sklearn import datasets, linear_model<br/> from sklearn.metrics import mean_squared_error, r2_score</pre>
<p>前面几行导入了<kbd>sklearn</kbd>包。数据集用于导入<kbd>sklearn</kbd>包中的内置数据集。在本程序中，我们将使用上一节中介绍的波士顿房价数据集。<kbd>linear_model</kbd>包用于访问线性回归函数，度量包用于计算我们模型的测试度量，例如均方误差:</p>
<pre>boston = datasets.load_boston()</pre>
<p>前面一行从<kbd>sklearn</kbd>数据集包中加载波士顿数据集:</p>
<pre> bos = pd.DataFrame(boston.data)</pre>
<p>现在，我们需要从整个数据集中提取数据:</p>
<pre><br/> bos.columns = boston.feature_names</pre>
<p>获取列名，即该数据的标题:</p>
<pre>bos['price'] = boston.target</pre>
<p>现在，让我们定义我们想要预测的目标列。定义为目标的列将是要预测的列:</p>
<pre> x = bos.drop('price', axis=1)</pre>
<p>一旦我们定义了目标列，我们将从目标列中删除数据，这样它就变成了<kbd>x</kbd>:</p>
<pre> y = bos.price</pre>
<p>由于我们将价格定义为目标列，<kbd>y</kbd>是数据集数据中的价格列:</p>
<pre> X_train,X_test,Y_train,Y_test = sklearn.model_selection.train_test_split(x,y,test_size=0.3,random_state=5)</pre>
<p>然后，我们按照70/30规则将数据分为训练数据和测试数据:</p>
<pre> lm = sklearn.linear_model.LinearRegression() </pre>
<p>一旦我们有了训练和测试数据，我们就可以启动一个线性回归对象:</p>
<pre> lm.fit(X_train, Y_train)</pre>
<p>使用已经初始化的线性回归对象，我们只需将训练和测试数据输入回归模型:</p>
<pre>Y_pred = lm.predict(X_test)</pre>
<p>前面一行预测了目标:</p>
<pre>mse = sklearn.metrics.mean_squared_error(Y_test, Y_pred)<br/>print(mse);</pre>
<p>前面几行将计算拟合模型和预测结果的均方误差。</p>
<p>因为回归预测模型预测一个数量，模型的技巧必须在那些预测中被报告为一个错误。</p>
<p>评估回归预测模型技巧的方法有很多，但最常见的是计算<strong>均方根误差</strong> ( <strong> RMSE </strong>)。</p>
<p>例如，如果一个回归预测模型做出了两个预测，其中一个预测为<em> 1.5 </em>，预期值为<em> 1.0 </em>，另一个预测为3.3，预期值为<em> 3.0 </em>，则<em> RMSE </em>将如下所示:</p>
<table style="border-collapse: collapse;width: 410px;height: 167px" border="1">
<tbody>
<tr>
<td style="width: 51px">一</td>
<td style="width: 353px"><em>RMSE = sqrt(average(error^2)】</em></td>
</tr>
<tr>
<td style="width: 51px">2</td>
<td style="width: 353px"><div><em>RMSE = sqrt((1.0-1.5)^2+(3.0-3.3)^2)/2)</em></div></td>
</tr>
<tr>
<td style="width: 51px">3</td>
<td style="width: 353px"><div><em>RMSE = sqrt((0.25+0.09)/2)</em></div></td>
</tr>
<tr>
<td style="width: 51px">四</td>
<td style="width: 353px"><div><em>RMSE = sqrt(0.17)</em></div></td>
</tr>
<tr>
<td style="width: 51px">5</td>
<td style="width: 353px"><em> RMSE = 0.412 </em></td>
</tr>
</tbody>
</table>
<p> </p>
<p><em> RMSE </em>的一个好处是误差分数的单位与预测值的单位相同:</p>
<pre> model = coremltools.converters.sklearn.convert(<br/>     sk_obj=lm,input_features=boston.feature_names,<br/>     output_feature_names='price')</pre>
<p>在前一行中，我们将拟合模型转换为核心ML格式。基本上，这是创建<kbd>.mlmodel</kbd>文件的那一行。我们还指定了输入和输出列名:</p>
<pre> model.save('HousePricer.mlmodel')</pre>
<p>在前一行中，我们将模型保存到磁盘上。这可以在我们的iOS程序中使用。</p>


            

            
        
    






    
        <title>Running and testing the model</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">运行和测试模型</h1>
                
            
            
                
<p>当由<kbd>scikit-learn</kbd>创建的模型在转换成核心ML格式之前被独立执行和测试时，发现了以下方差和均方误差:</p>
<ul>
<li>准备好的模型的均方误差为<kbd>30.703232</kbd></li>
<li>差异分数为<kbd>0.68</kbd></li>
<li>该过程以退出代码<kbd>0</kbd>结束</li>
</ul>
<p class="mce-root"/>
<p>下图给出了预测值与实际值的对比:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-701 image-border" src="img/2d37875f-7070-4c8b-805f-f43c360f59a9.png" style="width:57.33em;height:29.83em;"/></p>


            

            
        
    






    
        <title>Importing the model into the iOS project</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">将模型导入iOS项目</h1>
                
            
            
                
<p>下面是Xcode项目的项目结构，其中<kbd>.mlmodel</kbd>文件被导入并用于预测:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-702 image-border" src="img/e388c71b-ab13-4629-a3dc-a3e8e67ffb0f.png" style="width:18.00em;height:18.50em;"/></p>
<p><kbd>ViewCcontroller.swift</kbd>文件是使用创建的模型文件的地方，住房预测在移动应用程序中执行。</p>
<p><kbd>housePricer.mlmodel</kbd>文件是使用<kbd>scikit-learn</kbd>创建的模型文件，并使用核心ML转换器工具转换成ML模型文件。这个文件包含在iOS Xcode项目的<kbd>resources</kbd>文件夹中。</p>


            

            
        
    






    
        <title>Writing the iOS application</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">编写iOS应用程序</h1>
                
            
            
                
<p>本节提供了使用<kbd>.mlmodel</kbd>格式的模型并进行房价预测的<kbd>Swift</kbd>代码的详细信息:</p>
<pre>//  ViewController.swift<br/>import UIKit<br/>import CoreML<br/>class ViewController: UIViewController {<br/>    let model = HousePricer()</pre>
<p>这一行用于初始化我们已经导入到项目中的模型类。以下几行定义了文本字段的出口/变量，以便与之交互:</p>
<pre> @IBOutlet weak var crim: UITextField!<br/>    @IBOutlet weak var zn: UITextField!<br/>    @IBOutlet weak var price: UILabel!<br/>    @IBOutlet weak var b: UITextField!<br/>    @IBOutlet weak var ptratio: UITextField!<br/>    @IBOutlet weak var medv: UITextField!<br/>    @IBOutlet weak var lstat: UITextField!<br/>    @IBOutlet weak var rad: UITextField!<br/>    @IBOutlet weak var tax: UITextField!<br/>    @IBOutlet weak var dis: UITextField!<br/>    @IBOutlet weak var age: UITextField!<br/>    @IBOutlet weak var rm: UITextField!<br/>    @IBOutlet weak var nox: UITextField!<br/>    @IBOutlet weak var chas: UITextField!<br/>    @IBOutlet weak var indus: UITextField!<br/>    override func didReceiveMemoryWarning() {<br/>        super.didReceiveMemoryWarning()<br/>        // Dispose of any resources that can be recreated.<br/>    }<br/>    override func viewDidLoad() {<br/>        super.viewDidLoad();<br/>        updated(rad);<br/>    }<br/>    @IBAction func updated(_ sender: Any) {<br/>        guard let modeloutput = try? model.prediction(CRIM: Double(crim.text!)!, ZN: Double(zn.text!)!, INDUS: Double(indus.text!)!, CHAS: Double(chas.text!)!, NOX: Double(nox.text!)!, RM: Double(rm.text!)!, AGE: Double(age.text!)!, DIS: Double(dis.text!)!, RAD: Double(rad.text!)!, TAX: Double(tax.text!)!, PTRATIO: Double(ptratio.text!)!, B: Double(b.text!)!, LSTAT: Double(lstat.text!)!) else {<br/>            fatalError("unexpected runtime error")<br/>     }<br/>        price.text = "$" + String(format: "%.2f",modeloutput.price);<br/>    }<br/>}</pre>
<p> </p>
<p> </p>
<p>前面的函数作为<kbd>onchange</kbd>监听器添加到所有前面的文本字段。在这里，我们使用我们之前创建的模型对象，并预测文本字段中给定值的价格。</p>


            

            
        
    






    
        <title>Running the iOS application</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">运行iOS应用程序</h1>
                
            
            
                
<p>创建的Xcode项目在模拟器中执行，以下是我们获得的示例:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-703 image-border" src="img/d86fa06c-912e-42ca-aa48-9c9a51313aa1.png" style="width:16.33em;height:28.92em;"/></p>


            

            
        
    






    
        <title>Further reading</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">进一步阅读</h1>
                
            
            
                
<p>我们可以通过访问Core ML的官方网站<a href="https://developer.apple.com/documentation/coreml">https://developer.apple.com/documentation/coreml</a>，更深入地了解其提供的服务。<a href="https://developer.apple.com/documentation/coreml"/></p>


            

            
        
    






    
        <title>Summary</title>
        
        <meta charset="utf-8"/>
    

    
        

                            
                    <h1 class="header-title">摘要</h1>
                
            
            
                
<p>在本章中，我们讨论了以下主题:</p>
<ul>
<li><strong>线性回归</strong>:理解算法，并使用Excel表格对Boston housing数据集进行实现。</li>
<li>Core ML :我们详细介绍了Core ML及其提供的各种特性。</li>
<li><strong>使用Core ML实现线性回归的示例应用</strong>:我们采用波士顿住房数据集，使用Core ML为iOS移动应用实现线性回归模型，并在移动应用中查看结果。</li>
</ul>


            

            
        
    


</body></html>